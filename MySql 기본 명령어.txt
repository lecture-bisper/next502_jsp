
MySql 기본 명령어

** 로그인 **
# mysql 명령을 사용하여 mysql 서버에 로그인하기 위한 명령 (콘솔에서 입력)
# 옵션
# -u : 로그인할 사용자 계정
# -p : 비밀번호, 비밀번호는 화면에 출력되지 않음
# -h : 접속하고자 하는 URL
# -P : 접속하고자 하는 Port (대문자 P)
 
> mysql -u 아이디 -p
> mysql -u 아이디 -h 접속url -p
> mysql -u 아이디 -h 접속url -P 포트번호 -p


** 비밀번호 변경 **
# 비밀번호 변경 방식이 변경됨

>> alter user '아이디'@'접속주소' identified with mysql_native_password by '변경할 비밀번호';


** 비밀번호 정책 확인 **
# mysql 8 버전으로 업데이트 되면서 비밀번호 정책이 강화됨
# 영문 대문자, 소문자, 숫자, 특수문자를 모두 사용하고 13글자 이상 길이로 구성해야 함
# 예전 방식대로 짧은 비밀번호를 사용하고 싶을 경우 현재 비밀번호 정책을 확인하고 비밀번호 정책을 변경 후 비밀번호를 수정해야 함

>> show variables like 'validate_password%';


** 비밀번호 정책 수정 **
# 비밀번호 정책이 영구적으로 변경되는 것은 아니고 mysql 서버를 재시작하면 정책에 원상복구됨

>> set global validate_password.policy=LOW;


** 명령 즉시 적용 **
# 권한 설정 등의 몇몇 명령은 mysql 에 즉시 반영되지 않고, mysql 서버 재시작 시 반영됨
# 해당 명령 사용 시 mysql 서버에 입력했던 명령이 즉시 반영됨

>> flush privileges;


** DB 백업 **
# 콘솔창에서 명령어를 입력
# 관리자 계정으로 실행하는 것이 좋음
# -A 옵션 사용 시 모든 데이터베이스를 백업함

> mysqldump -u 아이디 -p db명 > 생성할 파일명   (지정한 DB 백업) 
> mysqldump -u 아이디 -p -A > 생성할 파일명   (모든 DB 백업)


** DB 복구 **
# 콘솔창에서 명령어를 실행
# 관리자 계정으로 실행하는 것이 좋음
# 복구 시 복구할 데이터베이스가 존재해야 함

> mysql -u 아이디 -p db명 < 복구할 파일명


** 사용자 추가 **
# mysql 서버에 접속할 수 있는 사용자 계정 생성
# 관리자 계정에서 생성함
# 일반 sql 명령어로 생성함
# 접속 주소를 입력하지 않을 경우 자동으로 전체접속(%)이 됨
# 전체 접속과 지정 url 을 따로 입력할 수 있음

>> create user '아이디';
>> create user '아이디'@'접속주소' identified by '비밀번호';


** 사용자 삭제 **
# 관리자 계정에서 사용자를 삭제함
# 접속 주소를 입력하지 않을 경우 전체 접속으로 인식함
# 모든 접속에 대한 계정을 삭제하는 것이 좋음

>> drop user '아이디';


** DB 목록 확인 **
# 현재 사용되는 데이터베이스 목록 확인

>> show databases;


** DB 사용 **
# 목록으로 확인한 데이터베이스를 실제로 사용하도록 설정

>> use DB명;


** table 목록 확인 **;
# use 명령으로 지정한 데이터베이스에 포함되어 있는 테이블 목록을 확인

>> show tables;


** DB 생성 **
# mysql 8 버전부터 기본적으로 유니코드를 사용하여 기본 문자셋을 지정하지 않아도 됨
# 원하는 문자셋이 있을 경우 문자셋을 지정할 수 있음
# mysql 의 기본 유니코드는 utf8 이 아닌 utf8mb4 임

>> create database DB명;
>> create database DB명 default character set utf8;


** DB 제거 **

>> drop database DB명;


** DB 사용 권한 확인 **
# 지정한 사용자에 대해서 데이터베이스에 관한 권한을 확인

>> show grants for '아이디'@'접속주소';


** DB 사용 권한 설정 **
# 지정한 사용자에게 지정한 데이터베이스 및 테이블에 대한 사용 권한을 설정
# DB명.* 을 사용할 경우 해당 데이터베이스의 모든 테이블에 대해서 사용 권한을 설정
# DB명.테이블명 을 사용하여 원하는 테이블에만 사용 권한을 설정할 수 있음
# all privileges 을 사용할 경우 지정한 데이터베이스 및 테이블에 대한 모든 권한을 의미
# 원하는 권한을 정해서 설정할 수 있음

>> grant all privileges on DB명.테이블명 to '아이디'@'접속주소';


** DB 사용 권한 삭제 **
# 지정한 사용자에게 부여된 데이터베이스 및 테이블 사용 권한을 삭제
# 권한 설정과 같이 원하는 테이블 및 권한한 종류를 지정하여 권한을 삭제할 수 있음

>> revoke all privileges on DB명.테이블명 from '아이디'@'접속주소';


** JDBC 접속 문자열 **
# JSP 및 Spring 에서 JDBC를 사용하여 데이터베이스에 접속 시 필요한 접속 문자열
# serverTimezone=UTC 에서 UTC 대신 ASIA/SEOUL 을 사용할 수 있음
# JSP 에서는 기본적으로 LocalDateTime으로 동작하여 UTC 나 ASIA/SEOUL 이나 차이가 없지만 Spring 에서는 날짜변경선 기준 시간으로 동작하기 때문에 ASIA/SEOUL 을 사용해야 함

- jdbc:mysql://접속주소:포트/DB명?characterEncoding=UTF-8&serverTimezone=UTC







